<div id="tab-navigation-bar">
  <div class="tab-navigation-links">
    <a href="https://www.thunderbird.net">Thunderbird</a>
    <a href="https://www.tb.pro" class="active">Thunderbird Pro</a>
  </div>
</div>

<script>
  const stageHosts = {{ settings.STAGE_HOSTS|tojson|safe }};
  const currentHost = window.location.hostname;
  const isStage = stageHosts.includes(currentHost);

  // Update href values based on environment
  document.querySelectorAll('#tab-navigation-bar a').forEach(link => {
    const linkHost = new URL(link.href).hostname;

    // Determine which link this is and update.
    if (linkHost.includes('thunderbird.net')) {
      // Thunderbird link
      link.href = isStage ? 'https://www-stage.thunderbird.net/' : 'https://www.thunderbird.net/';
    } else if (linkHost.includes('tb.pro')) {
      // Thunderbird Pro link
      link.href = isStage ? 'https://stage.tb.pro/' : 'https://tb.pro/';
    }
  });

  // Set .active class accordingly.
  document.querySelectorAll('#tab-navigation-bar a').forEach(link => {
    const linkHost = new URL(link.href).hostname;

    if (linkHost.replace('www.', '') === currentHost.replace('www.', '')) {
      link.classList.add('active');
      link.addEventListener('click', (e) => {
        e.preventDefault();
      });
      link.style.cursor = 'default';
    } else {
      // Remove active class from other links
      link.classList.remove('active');
    }
  });
</script>
