<div id="tab-navigation-bar">
  <div class="tab-navigation-links">
    <a href="{{ settings.CANONICAL_URL }}" data-stage-url="{{ settings.CANONICAL_STAGE_URL }}">Thunderbird</a>
    <a href="{{ settings.CANONICAL_TBPRO_URL }}" class="active" data-stage-url="{{ settings.CANONICAL_TBPRO_STAGE_URL}}">Thunderbird Pro</a>
  </div>
</div>

<script>
  const stageHosts = {{ settings.STAGE_HOSTS|tojson|safe }};
  const currentHost = window.location.hostname.replace('www.', '');
  const isStage = stageHosts.includes(currentHost);

  if (isStage) {
    // Replace with stage.* URLs
    document.querySelectorAll('#tab-navigation-bar a').forEach(link => {
      link.href = link.dataset.stageUrl;
    });
  }

  // Set .active class accordingly.
  document.querySelectorAll('#tab-navigation-bar a').forEach(link => {
    const linkHost = new URL(link.href).hostname.replace('www', '');
    const doesMatchCurrent = linkHost === currentHost;

    if (doesMatchCurrent) {
      link.classList.add('active');
      link.style.cursor = 'default';
      link.addEventListener('click', (e) => {
        e.preventDefault();
      });
    } else {
      // Remove active class from other links
      link.classList.remove('active');
    }
  });
</script>
